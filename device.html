<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Device Authentication - Umami Audio</title>
  <script>
    // Handle device flow redirect
    (function() {
      console.log('ðŸ“„ Static device.html loaded');
      console.log('ðŸ“„ Current URL:', window.location.href);
      
      // Get the current URL parameters
      const urlParams = new URLSearchParams(window.location.search);
      const code = urlParams.get('code');
      const auto = urlParams.get('auto');
      
      console.log('ðŸ“„ Device page params - code:', code, 'auto:', auto);
      
      if (code && auto === 'true') {
        // This is a device flow auto-submit, redirect to the React app
        console.log('ðŸ“„ Device flow detected, redirecting to React app');
        const newUrl = '/device?code=' + encodeURIComponent(code) + '&auto=true';
        console.log('ðŸ“„ Redirecting to:', newUrl);
        window.location.replace(newUrl);
      } else {
        // Regular device page access, redirect to React app
        console.log('ðŸ“„ Regular device page access, redirecting to React app');
        window.location.replace('/device' + window.location.search);
      }
    })();
  </script>
</head>
<body>
  <div style="text-align: center; margin-top: 50px; font-family: Arial, sans-serif;">
    <h2>Redirecting to Device Authentication...</h2>
    <p>If you are not redirected automatically, <a href="/device">click here</a>.</p>
  </div>
</body>
</html>
